@import "tailwindcss";
@import "tw-animate-css";

/* Faz o dark: responder Ã  classe .dark no <html> */
@variant dark (&:where(.dark, .dark *));

:root {
  --background: hsl(210 20% 98%);
  --foreground: hsl(222 47% 11%);
  --card: hsl(210 20% 98%);
  --card-foreground: hsl(222 47% 11%);
  --popover: hsl(210 20% 98%);
  --popover-foreground: hsl(222 47% 11%);
  --primary: hsl(142 72% 35%);
  --primary-foreground: hsl(210 40% 98%);
  --secondary: hsl(210 20% 94%);
  --secondary-foreground: hsl(222 47% 11%);
  --muted: hsl(210 16% 92%);
  --muted-foreground: hsl(215 16% 45%);
  --accent: hsl(210 20% 94%);
  --accent-foreground: hsl(222 47% 11%);
  --destructive: hsl(0 74% 50%);
  --destructive-foreground: hsl(210 40% 98%);
  --border: hsl(214 20% 90%);
  --input: hsl(214 20% 90%);
  --ring: hsl(142 72% 35%);
  --radius: 14px;
}

.dark {
  --background: hsl(222 47% 9%);
  --foreground: hsl(210 40% 96%);
  --card: hsl(222 47% 11%);
  --card-foreground: hsl(210 40% 96%);
  --popover: hsl(222 47% 11%);
  --popover-foreground: hsl(210 40% 96%);
  --primary: hsl(142 70% 45%);
  --primary-foreground: hsl(222 47% 9%);
  --secondary: hsl(217 25% 18%);
  --secondary-foreground: hsl(210 40% 96%);
  --muted: hsl(217 18% 16%);
  --muted-foreground: hsl(215 18% 65%);
  --accent: hsl(217 25% 18%);
  --accent-foreground: hsl(210 40% 96%);
  --destructive: hsl(0 62% 32%);
  --destructive-foreground: hsl(210 40% 98%);
  --border: hsl(217 22% 18%);
  --input: hsl(217 22% 18%);
  --ring: hsl(142 70% 45%);
}

@theme inline {
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --color-card: var(--card);
  --color-card-foreground: var(--card-foreground);
  --color-popover: var(--popover);
  --color-popover-foreground: var(--popover-foreground);
  --color-primary: var(--primary);
  --color-primary-foreground: var(--primary-foreground);
  --color-secondary: var(--secondary);
  --color-secondary-foreground: var(--secondary-foreground);
  --color-muted: var(--muted);
  --color-muted-foreground: var(--muted-foreground);
  --color-accent: var(--accent);
  --color-accent-foreground: var(--accent-foreground);
  --color-destructive: var(--destructive);
  --color-destructive-foreground: var(--destructive-foreground);
  --color-border: var(--border);
  --color-input: var(--input);
  --color-ring: var(--ring);
  --radius-lg: var(--radius);
  --radius-md: calc(var(--radius) - 2px);
  --radius-sm: calc(var(--radius) - 4px);
}

@layer base {
  body {
    background-color: var(--background);
    color: var(--foreground);
  }
}

.page-fade-enter-active,
.page-fade-leave-active {
  transition: opacity 180ms ease, transform 200ms ease;
}

.page-fade-enter-from,
.page-fade-leave-to {
  opacity: 0;
  transform: translateY(6px);
}

@media (prefers-reduced-motion: reduce) {
  .page-fade-enter-active,
  .page-fade-leave-active {
    transition: none;
  }
  .page-fade-enter-from,
  .page-fade-leave-to {
    transform: none;
  }
}

@media print {
  @page {
    size: A4;
    margin: 0;
  }
  * {
    -webkit-print-color-adjust: exact;
    print-color-adjust: exact;
  }
  html,
  body {
    height: auto !important;
    overflow: visible !important;
    margin: 0 !important;
  }
  body {
    background: #ffffff;
    color: #111827;
  }
  .app-sidebar,
  .app-topbar,
  .app-drawer {
    display: none !important;
  }
  body.print-preview .app-shell {
    display: none !important;
  }
  body.print-preview .analysis-print-teleport {
    display: block !important;
  }
  body.print-preview .analysis-print-root {
    display: none !important;
  }
  .app-shell,
  .app-main {
    height: auto !important;
    overflow: visible !important;
  }
  .app-shell,
  .app-main {
    display: block !important;
  }
  .app-main {
    width: 100% !important;
  }
  .analysis-print-root {
    display: block !important;
    gap: 0 !important;
  }
  .analysis-print-root > * {
    display: block !important;
  }
  .analysis-print-root .print-map-row {
    display: block;
  }
  .mx-auto {
    margin-left: 0 !important;
    margin-right: 0 !important;
  }
  .max-w-6xl {
    max-width: 100% !important;
  }
  .screen-only {
    display: none !important;
  }
  .print-only {
    display: block !important;
  }
  .print-card {
    box-shadow: none !important;
    border: 1px solid #e5e7eb !important;
    break-inside: auto;
    page-break-inside: auto;
    width: 100% !important;
    max-width: 100% !important;
    padding: 16px !important;
  }
  .print-legend-swatch {
    border-width: 1px;
  }
  .print-page-1,
  .print-page-2 {
    break-after: auto;
    page-break-after: auto;
    break-before: auto;
    page-break-before: auto;
    break-inside: auto;
    page-break-inside: auto;
    display: block !important;
    position: relative;
  }
  .analysis-map-frame {
    height: var(--print-map-height, 360px) !important;
  }
  .analysis-print-root .analysis-map-frame {
    overflow: hidden !important;
  }
  .analysis-print-root .analysis-map-frame .leaflet-container {
    background: #e5e7eb;
  }
  .analysis-print-root .text-xl {
    font-size: 16px !important;
  }
  .analysis-print-root .text-lg {
    font-size: 14px !important;
  }
  .analysis-print-root .text-sm {
    font-size: 11px !important;
  }
  .analysis-print-root .text-xs {
    font-size: 10px !important;
  }
  .analysis-print-root .rounded-2xl {
    border-radius: 10px !important;
  }
  .analysis-print-root .gap-6 {
    gap: 16px !important;
  }
  .analysis-print-root .mb-6 {
    margin-bottom: 16px !important;
  }
  .analysis-print-root .mt-4 {
    margin-top: 12px !important;
  }
  .analysis-print-root .grid {
    gap: 8px !important;
  }
  .analysis-print-root .p-6 {
    padding: 16px !important;
  }
  .analysis-print-root .h-10 {
    height: 36px !important;
    width: 36px !important;
  }
  .analysis-print-root .analysis-map-legend {
    display: none !important;
  }
  .analysis-print-root .print-legend-swatch {
    height: 10px !important;
    width: 10px !important;
  }
  .analysis-print-root .intersections-grid {
    display: grid !important;
    grid-template-columns: repeat(4, minmax(0, 1fr)) !important;
    gap: 6px !important;
  }
  .analysis-print-root .print-intersection-item {
    padding: 6px 8px !important;
    border-radius: 10px !important;
    font-size: 10px !important;
    gap: 8px !important;
    border-color: #e5e7eb !important;
    break-inside: avoid;
    page-break-inside: avoid;
  }
  .analysis-print-root .print-intersection-item span {
    line-height: 1.2 !important;
  }
  .analysis-print-root .print-map-row {
    display: grid !important;
    grid-template-columns: minmax(0, 1fr) 180px !important;
    align-items: start;
    gap: 12px !important;
  }
  .analysis-print-root .print-legend-col .grid {
    grid-template-columns: repeat(3, minmax(0, 1fr)) !important;
  }
  .analysis-print-root .print-legend-col {
    align-self: start;
  }
  .analysis-print-root .print-page-1 {
    break-after: page;
    page-break-after: always;
    position: relative;
  }
  .analysis-print-root .print-page-2 {
    break-before: page;
    page-break-before: always;
    position: relative;
  }
  .analysis-print-root .print-breakable {
    break-inside: auto;
    page-break-inside: auto;
  }
  .analysis-map-frame .leaflet-control-container,
  .analysis-map-frame .leaflet-control-attribution {
    display: none !important;
  }
  .print-footer {
    position: fixed;
    bottom: 6mm;
    left: 0;
    right: 0;
    text-align: center;
    color: #6b7280;
  }
  .analysis-map-legend {
    display: none !important;
  }
}

.print-only {
  display: none;
}

@media screen {
  body.print-preview {
    background: #ffffff;
    color: #111827;
  }

  body.print-preview .app-sidebar,
  body.print-preview .app-topbar,
  body.print-preview .app-drawer {
    display: none !important;
  }

  body.print-preview #app {
    display: none !important;
  }

  body.print-preview .app-shell,
  body.print-preview .app-main {
    height: auto !important;
    overflow: visible !important;
    display: block !important;
  }

  body.print-preview .app-main {
    width: 100% !important;
  }

  body.print-preview .app-main > div {
    height: auto !important;
    overflow: visible !important;
    flex: unset !important;
  }

  body.print-preview .analysis-print-root {
    display: none !important;
  }

  body.print-preview .analysis-print-teleport {
    position: static;
    inset: auto;
    background: #ffffff;
    overflow: visible;
    z-index: 60;
    display: block;
  }

  body.print-preview .analysis-print-root > * {
    display: block !important;
  }

  body.print-preview .analysis-print-root .print-map-row {
    display: grid !important;
    grid-template-columns: minmax(0, 1fr) 180px !important;
    align-items: start;
    gap: 12px !important;
  }

  body.print-preview .analysis-print-root .print-legend-col .grid {
    grid-template-columns: repeat(3, minmax(0, 1fr)) !important;
  }

  body.print-preview .analysis-print-root .mx-auto {
    margin-left: 0 !important;
    margin-right: 0 !important;
  }

  body.print-preview .analysis-print-root .max-w-6xl {
    max-width: 100% !important;
  }

  body.print-preview .analysis-print-root .screen-only {
    display: none !important;
  }

  body.print-preview .analysis-print-root .print-only {
    display: block !important;
  }

  body.print-preview .analysis-print-root .print-card {
    box-shadow: none !important;
    border: 1px solid #e5e7eb !important;
    width: 100% !important;
    max-width: 100% !important;
    padding: 16px !important;
  }

  body.print-preview .analysis-print-root .analysis-map-frame {
    height: var(--print-map-height, 360px) !important;
    overflow: hidden !important;
  }

  body.print-preview .analysis-print-root .analysis-map-frame .leaflet-container {
    background: #e5e7eb;
  }

  body.print-preview .analysis-print-root .analysis-map-legend,
  body.print-preview .analysis-map-frame .leaflet-control-container,
  body.print-preview .analysis-map-frame .leaflet-control-attribution {
    display: none !important;
  }
}

@media print {
  body.print-preview #app {
    display: none !important;
  }
  body.print-preview .analysis-print-teleport {
    position: static !important;
    inset: auto !important;
    height: auto !important;
    overflow: visible !important;
    background: #ffffff !important;
  }
}
