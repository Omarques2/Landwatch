# Base
NODE_ENV=development
PORT=3001

# Database (app schema)
DATABASE_URL=postgresql://user:password@host:5432/landwatch?schema=app&sslmode=require
SHADOW_DATABASE_URL=postgresql://user:password@host:5432/landwatch_shadow?schema=app&sslmode=require

# Sigfarm Auth (JWT validation)
SIGFARM_AUTH_ISSUER=https://auth.sigfarmintelligence.com
SIGFARM_AUTH_AUDIENCE=sigfarm-apps
SIGFARM_AUTH_JWKS_URL=https://api-auth.sigfarmintelligence.com/.well-known/jwks.json

# Legacy Entra vars (deprecated)
ENTRA_API_AUDIENCE=
ENTRA_AUTHORITY_HOST=login.microsoftonline.com
ENTRA_JWKS_TENANT=common
PLATFORM_ADMIN_SUBS=

# Hardening
CORS_ORIGINS=http://localhost:5173
CORS_CREDENTIALS=false
ENABLE_CSP=false
CSP_FRAME_SRC=
CSP_CONNECT_SRC=
RATE_LIMIT_ADMIN_WINDOW_MS=60000
RATE_LIMIT_ADMIN_MAX=60
RATE_LIMIT_AUTH_WINDOW_MS=60000
RATE_LIMIT_AUTH_MAX=20
TRUST_PROXY=false
DB_SSL_ALLOW_INVALID=false
API_KEY_PEPPER=change-me
API_KEY_PREFIX_LENGTH=8
DB_SCHEMA=app
LANDWATCH_SCHEMA=landwatch
LANDWATCH_SICAR_CATEGORY_CODE=SICAR
LANDWATCH_CAR_MAX_RADIUS_METERS=30000
LANDWATCH_CAR_MAX_RESULTS=25
LANDWATCH_PDF_STORAGE_DIR=./storage/pdfs
LANDWATCH_PDF_TTL_HOURS=2
LANDWATCH_PDF_TILE_PROVIDERS=https://mt1.google.com/vt/lyrs=s&x={x}&y={y}&z={z}

# E2E safety (obrigatorio para npm run test:e2e)
# - TEST_DATABASE_URL deve apontar para um banco com nome final "_test"
# - TEST_DATABASE_HOST_ALLOWLIST deve conter apenas hosts de teste/local
TEST_DATABASE_URL=postgresql://user:password@localhost:5432/landwatch_test?schema=app&sslmode=disable
TEST_DATABASE_HOST_ALLOWLIST=localhost,127.0.0.1
